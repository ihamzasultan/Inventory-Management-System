@model IEnumerable<InventoryManagementSystem.Inventory.Domain.ReturnItem>

@{
    ViewData["Title"] = "View All Returns";
    Layout = "_Layout";
}
@await Html.PartialAsync("_SalesSidebar")

<div class="main-content p-4" style="margin-left: 220px; background-color: #f8f9fa; min-height: 100vh;">
    <h4 class="mb-4 text-dark">View All Returns</h4>

    <div class="mb-4">
        <form asp-action="ViewAllReturns" method="get" class="d-flex gap-2">
            <input type="text" name="searchTerm" value="@ViewBag.SearchTerm" class="form-control shadow-sm" placeholder="Search by Product Name or SKU" />
            <button type="submit" class="btn btn-dark rounded-3">Search</button>
        </form>
    </div>
<div class="table-responsive">
    <table class="table table-hover table-bordered bg-white rounded-3 shadow-sm">
        <thead class="table-light">
            <tr>
                <th>Product Name</th>
                <th>SKU</th>
                <th>Delivered Quantity</th>
                <th>Returned Quantity</th>
                <th>Client</th>
                <th>Hand Over To</th>
                <th>Remarks</th>
                <th>Delivered At</th>
                <th>Returned At</th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null && Model.Any())
            {
                foreach (var returnItem in Model)
                {
                    <tr>
                        <td>@returnItem.StockOut?.Product?.Name</td>
                        <td>@returnItem.StockOut?.Product?.Sku</td>
                        <td>@returnItem.DeliveredQuantity</td>
                        <td>@returnItem.ReturnedQuantity</td>
                        <td>@returnItem.StockOut?.Client</td>
                        <td>@returnItem.StockOut?.HandOverTo</td>
                        <td>@returnItem.Remarks</td>
                        <td>@(returnItem.StockOut?.Date.ToString("g") ?? "N/A")</td>
                        <td>@returnItem.ReturnedAt.ToString("g")</td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="9" class="text-center">No return records found.</td>
                </tr>
            }
        </tbody>
    </table>
    </div>
</div>
